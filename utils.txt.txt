utility funcation for version 3